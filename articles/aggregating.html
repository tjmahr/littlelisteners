<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Aggregating Eyetracking Data • littlelisteners</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Aggregating Eyetracking Data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">littlelisteners</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/aggregating.html">Aggregating Eyetracking Data</a></li>
    <li><a class="dropdown-item" href="../articles/tobii-example.html">Tobii eyetracking data from scratch</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/pkgdown/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Aggregating Eyetracking Data</h1>
                        <h4 data-toc-skip class="author">TJ Mahr</h4>
            
            <h4 data-toc-skip class="date">2024-07-30</h4>
      

      <div class="d-none name"><code>aggregating.Rmd</code></div>
    </div>

    
    
<p>Let’s consider some word recognition eyetracking data from a Visual
World style experiment. On each trial, an array of images appears. For
example:</p>
<p><img src="figure-html/four-image-screen.png" alt="Example screen from the Visual World experiment. Four images arranged in a 2-by-2 grid appear on screen." width="70%"></p>
<p>Among these images is a target (here, <em>bell</em>), a phonological
competitor (<em>bee</em>), a semantic competitor (<em>drum</em>), and an
unrelated word (<em>swing</em>). The listener hears a prompt to view one
of images: <em>Find the bell</em>. The operative experimental question
is how does the probability of fixating on the named image change over
time.</p>
<p>The package provides some example eyetracking data from this
experiment for one participant. Each row is a sample from an eyetracker
running at a rate of 60 Hz (60 frames per second). <code>Time</code> is
in milliseconds. We have already mapped the <em>x</em>-<em>y</em> gaze
coordinates onto screen locations. These gaze locations are coded in the
<code>GazeByImageAOI</code> column as looks to the
<code>"Target"</code>, <code>"PhonologicalFoil"</code>,
<code>"SemanticFoil"</code>, or <code>"Unrelated"</code> images, or as
<code>"tracked"</code> (ambiguous/intermediate location) or
<code>NA</code> (offscreen or missing).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://www.tjmahr.com/littlelisteners/">littlelisteners</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">four_image_data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20,910 × 25</span></span></span>
<span><span class="co">#&gt;    Subject BlockNo  Time GazeByAOI GazeByImageAOI TargetLocation </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 001P          1 <span style="text-decoration: underline;">35</span>238 tracked   tracked        UpperRightImage</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 001P          1 <span style="text-decoration: underline;">35</span>255 tracked   tracked        UpperRightImage</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 001P          1 <span style="text-decoration: underline;">35</span>272 tracked   tracked        UpperRightImage</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 001P          1 <span style="text-decoration: underline;">35</span>288 tracked   tracked        UpperRightImage</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 001P          1 <span style="text-decoration: underline;">35</span>306 tracked   tracked        UpperRightImage</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 001P          1 <span style="text-decoration: underline;">35</span>322 tracked   tracked        UpperRightImage</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 001P          1 <span style="text-decoration: underline;">35</span>338 tracked   tracked        UpperRightImage</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 001P          1 <span style="text-decoration: underline;">35</span>355 tracked   tracked        UpperRightImage</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 001P          1 <span style="text-decoration: underline;">35</span>372 tracked   tracked        UpperRightImage</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 001P          1 <span style="text-decoration: underline;">35</span>388 tracked   tracked        UpperRightImage</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 20,900 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 19 more variables: PhonologicalLocation &lt;chr&gt;, SemanticLocation &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   UnrelatedLocation &lt;chr&gt;, Audio &lt;chr&gt;, CarrierOnset &lt;int&gt;, TrialNo &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   UpperLeftImage &lt;chr&gt;, UpperRightImage &lt;chr&gt;, LowerRightImage &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   LowerLeftImage &lt;chr&gt;, Target &lt;chr&gt;, SemanticFoil &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   PhonologicalFoil &lt;chr&gt;, Unrelated &lt;chr&gt;, UpperLeftImageStimulus &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   UpperRightImageStimulus &lt;chr&gt;, LowerRightImageStimulus &lt;chr&gt;, …</span></span></span></code></pre></div>
<div class="section level2">
<h2 id="response-definitions">Response definitions<a class="anchor" aria-label="anchor" href="#response-definitions"></a>
</h2>
<p>To deal with eyetracking data in a generic way, we need a way to
describe eyetracking responses. We assume that there are four basic gaze
types.</p>
<ul>
<li>Primary responses: A gaze to a primary or target image.</li>
<li>Other responses: Gazes to competing images.</li>
<li>Elsewhere looks: A gaze that is onscreen but not a primary or other
response. Typically, this occurs when the participant is shifting
between images.</li>
<li>Missing looks: A missing or offscreen gaze.</li>
</ul>
<p>A <em>response definition</em> is a programmatic way of describing
these response types. In the code below, <code>response_def</code> is a
response definition for the four-image experiment with a
<code>"Target"</code> image and the three competing images lumped
together in the <code>"Others"</code>, and other looks are either
<code>"tracked"</code> or missing (<code>NA</code>).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">response_def</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/response-definition.html">create_response_def</a></span><span class="op">(</span></span>
<span>  primary <span class="op">=</span> <span class="st">"Target"</span>,</span>
<span>  others <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PhonologicalFoil"</span>, <span class="st">"SemanticFoil"</span>, <span class="st">"Unrelated"</span><span class="op">)</span>,</span>
<span>  elsewhere <span class="op">=</span> <span class="st">"tracked"</span>,</span>
<span>  missing <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  label <span class="op">=</span> <span class="st">"looks to target"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">response_def</span></span>
<span><span class="co">#&gt; List of 5</span></span>
<span><span class="co">#&gt;  $ response_def: chr "looks to target"</span></span>
<span><span class="co">#&gt;  $ primary     : chr "Target"</span></span>
<span><span class="co">#&gt;  $ others      : chr [1:3] "PhonologicalFoil" "SemanticFoil" "Unrelated"</span></span>
<span><span class="co">#&gt;  $ elsewhere   : chr "tracked"</span></span>
<span><span class="co">#&gt;  $ missing     : logi NA</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr "response_def"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="aggregating-looks">Aggregating looks<a class="anchor" aria-label="anchor" href="#aggregating-looks"></a>
</h2>
<p>These response definitions allow us to aggregate looking data in a
generic way. The function <code><a href="../reference/aggregating-looks.html">aggregate_looks()</a></code> counts the
number of looks to each of the four response categories using an
aggregation formula. For example, we can count looks by participant.
There are several columns here, so we use <code><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse()</a></code> to look
at some values from every column.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">four_image_data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/aggregating-looks.html">aggregate_looks</a></span><span class="op">(</span><span class="va">response_def</span>, <span class="va">Subject</span> <span class="op">~</span> <span class="va">GazeByImageAOI</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 1</span></span>
<span><span class="co">#&gt; Columns: 14</span></span>
<span><span class="co">#&gt; $ .response_def    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "looks to target"</span></span>
<span><span class="co">#&gt; $ Subject          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "001P"</span></span>
<span><span class="co">#&gt; $ PhonologicalFoil <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2461</span></span>
<span><span class="co">#&gt; $ SemanticFoil     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2478</span></span>
<span><span class="co">#&gt; $ Target           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 4094</span></span>
<span><span class="co">#&gt; $ Unrelated        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2033</span></span>
<span><span class="co">#&gt; $ Elsewhere        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1202</span></span>
<span><span class="co">#&gt; $ Missing          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 8642</span></span>
<span><span class="co">#&gt; $ Others           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 6972</span></span>
<span><span class="co">#&gt; $ Primary          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 4094</span></span>
<span><span class="co">#&gt; $ Looks            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 20910</span></span>
<span><span class="co">#&gt; $ Prop             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.369962</span></span>
<span><span class="co">#&gt; $ PropSE           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.004589513</span></span>
<span><span class="co">#&gt; $ PropNA           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.4132951</span></span></code></pre></div>
<p>Or looks by participant by trial. Here we just print the dataframe as
is.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">four_image_data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/aggregating-looks.html">aggregate_looks</a></span><span class="op">(</span><span class="va">response_def</span>, <span class="va">Subject</span> <span class="op">+</span> <span class="va">TrialNo</span> <span class="op">~</span> <span class="va">GazeByImageAOI</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 24 × 15</span></span></span>
<span><span class="co">#&gt;    .response_def  Subject TrialNo PhonologicalFoil SemanticFoil Target Unrelated</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> looks to targ… 001P          1              232           80    250       105</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> looks to targ… 001P          2              181           93    242       160</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> looks to targ… 001P          3               79          101    231        66</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> looks to targ… 001P          4              188          135    123       145</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> looks to targ… 001P          5               90          170    164        79</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> looks to targ… 001P          6               70          198    172        24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> looks to targ… 001P          7               83           47    109       195</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> looks to targ… 001P          8               60           63     77        40</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> looks to targ… 001P          9               71           50     50        50</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> looks to targ… 001P         10               57          305    150        82</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 14 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8 more variables: Elsewhere &lt;dbl&gt;, Missing &lt;dbl&gt;, Others &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Primary &lt;dbl&gt;, Looks &lt;dbl&gt;, Prop &lt;dbl&gt;, PropSE &lt;dbl&gt;, PropNA &lt;dbl&gt;</span></span></span></code></pre></div>
<p>We can also perform other kind of aggregations using different
response definitions. For instance, we can compare image
<em>locations</em> by writing a new response definition.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">location_def</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/response-definition.html">create_response_def</a></span><span class="op">(</span></span>
<span>  primary <span class="op">=</span> <span class="st">"LowerLeftImage"</span>,</span>
<span>  others <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"UpperRightImage"</span>, <span class="st">"UpperLeftImage"</span>, <span class="st">"LowerRightImage"</span><span class="op">)</span>,</span>
<span>  elsewhere <span class="op">=</span> <span class="st">"tracked"</span>,</span>
<span>  missing <span class="op">=</span> <span class="cn">NA</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/aggregating-looks.html">aggregate_looks</a></span><span class="op">(</span><span class="va">four_image_data</span>, <span class="va">location_def</span>, <span class="va">Subject</span> <span class="op">~</span> <span class="va">GazeByAOI</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 1</span></span>
<span><span class="co">#&gt; Columns: 14</span></span>
<span><span class="co">#&gt; $ .response_def   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "LowerLeftImage"</span></span>
<span><span class="co">#&gt; $ Subject         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "001P"</span></span>
<span><span class="co">#&gt; $ LowerLeftImage  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2761</span></span>
<span><span class="co">#&gt; $ LowerRightImage <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 3099</span></span>
<span><span class="co">#&gt; $ UpperLeftImage  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2569</span></span>
<span><span class="co">#&gt; $ UpperRightImage <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2637</span></span>
<span><span class="co">#&gt; $ Elsewhere       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1202</span></span>
<span><span class="co">#&gt; $ Missing         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 8642</span></span>
<span><span class="co">#&gt; $ Others          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 8305</span></span>
<span><span class="co">#&gt; $ Primary         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 2761</span></span>
<span><span class="co">#&gt; $ Looks           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 20910</span></span>
<span><span class="co">#&gt; $ Prop            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.249503</span></span>
<span><span class="co">#&gt; $ PropSE          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.004113552</span></span>
<span><span class="co">#&gt; $ PropNA          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.4132951</span></span></code></pre></div>
<p>We can perform multiple aggregations at once. First,
<code><a href="../reference/cycle_response_def.html">cycle_response_def()</a></code> can create a set of response
definitions where each response acts as the primary outcome.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_defs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cycle_response_def.html">cycle_response_def</a></span><span class="op">(</span><span class="va">response_def</span><span class="op">)</span></span>
<span><span class="va">all_defs</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; List of 5</span></span>
<span><span class="co">#&gt;  $ response_def: chr "Target"</span></span>
<span><span class="co">#&gt;  $ primary     : chr "Target"</span></span>
<span><span class="co">#&gt;  $ others      : chr [1:3] "PhonologicalFoil" "SemanticFoil" "Unrelated"</span></span>
<span><span class="co">#&gt;  $ elsewhere   : chr "tracked"</span></span>
<span><span class="co">#&gt;  $ missing     : logi NA</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr "response_def"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; List of 5</span></span>
<span><span class="co">#&gt;  $ response_def: chr "PhonologicalFoil"</span></span>
<span><span class="co">#&gt;  $ primary     : chr "PhonologicalFoil"</span></span>
<span><span class="co">#&gt;  $ others      : chr [1:3] "Target" "SemanticFoil" "Unrelated"</span></span>
<span><span class="co">#&gt;  $ elsewhere   : chr "tracked"</span></span>
<span><span class="co">#&gt;  $ missing     : logi NA</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr "response_def"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt; List of 5</span></span>
<span><span class="co">#&gt;  $ response_def: chr "SemanticFoil"</span></span>
<span><span class="co">#&gt;  $ primary     : chr "SemanticFoil"</span></span>
<span><span class="co">#&gt;  $ others      : chr [1:3] "Target" "PhonologicalFoil" "Unrelated"</span></span>
<span><span class="co">#&gt;  $ elsewhere   : chr "tracked"</span></span>
<span><span class="co">#&gt;  $ missing     : logi NA</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr "response_def"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[4]]</span></span>
<span><span class="co">#&gt; List of 5</span></span>
<span><span class="co">#&gt;  $ response_def: chr "Unrelated"</span></span>
<span><span class="co">#&gt;  $ primary     : chr "Unrelated"</span></span>
<span><span class="co">#&gt;  $ others      : chr [1:3] "Target" "PhonologicalFoil" "SemanticFoil"</span></span>
<span><span class="co">#&gt;  $ elsewhere   : chr "tracked"</span></span>
<span><span class="co">#&gt;  $ missing     : logi NA</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr "response_def"</span></span></code></pre></div>
<p>When given a list of response definitions,
<code><a href="../reference/aggregating-looks.html">aggregate_looks()</a></code> does the right thing and computes the
aggregation for each one.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">four_image_data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/aggregating-looks.html">aggregate_looks</a></span><span class="op">(</span><span class="va">all_defs</span>, <span class="va">Subject</span> <span class="op">~</span> <span class="va">GazeByImageAOI</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    ResponseDef <span class="op">=</span> <span class="va">.response_def</span>, </span>
<span>    <span class="va">Subject</span>, <span class="va">Primary</span>, </span>
<span>    <span class="va">Others</span>, <span class="va">Prop</span>, <span class="va">PropSE</span>, <span class="va">PropNA</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="24%">
<col width="11%">
<col width="11%">
<col width="10%">
<col width="14%">
<col width="14%">
<col width="14%">
</colgroup>
<thead><tr class="header">
<th align="left">ResponseDef</th>
<th align="left">Subject</th>
<th align="right">Primary</th>
<th align="right">Others</th>
<th align="right">Prop</th>
<th align="right">PropSE</th>
<th align="right">PropNA</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Target</td>
<td align="left">001P</td>
<td align="right">4094</td>
<td align="right">6972</td>
<td align="right">0.3699620</td>
<td align="right">0.0045895</td>
<td align="right">0.4132951</td>
</tr>
<tr class="even">
<td align="left">PhonologicalFoil</td>
<td align="left">001P</td>
<td align="right">2461</td>
<td align="right">8605</td>
<td align="right">0.2223929</td>
<td align="right">0.0039532</td>
<td align="right">0.4132951</td>
</tr>
<tr class="odd">
<td align="left">SemanticFoil</td>
<td align="left">001P</td>
<td align="right">2478</td>
<td align="right">8588</td>
<td align="right">0.2239292</td>
<td align="right">0.0039629</td>
<td align="right">0.4132951</td>
</tr>
<tr class="even">
<td align="left">Unrelated</td>
<td align="left">001P</td>
<td align="right">2033</td>
<td align="right">9033</td>
<td align="right">0.1837159</td>
<td align="right">0.0036813</td>
<td align="right">0.4132951</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="growth-curve-analysis-is-aggregating-looks-over-time">Growth curve analysis is aggregating looks over time<a class="anchor" aria-label="anchor" href="#growth-curve-analysis-is-aggregating-looks-over-time"></a>
</h2>
<p>With <code><a href="../reference/aggregating-looks.html">aggregate_looks()</a></code>, we can estimate growth curves of
looking probabilities. First, for this dataset, we need to adjust the
eyetracking timestamps so that time 0 occurs at target onset. We are
also going to bin and downsample the eyetracking data to have an
effective sampling rate of 10 frames per second—just for plotting.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">growth_curves</span> <span class="op">&lt;-</span> <span class="va">four_image_data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/adjust_times.html">adjust_times</a></span><span class="op">(</span><span class="va">Time</span>, <span class="va">TargetOnset</span>, <span class="va">Subject</span>, <span class="va">BlockNo</span>, <span class="va">TrialNo</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1005</span> <span class="op">&lt;=</span> <span class="va">Time</span>, <span class="va">Time</span> <span class="op">&lt;=</span> <span class="fl">2000</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/assign_bins.html">assign_bins</a></span><span class="op">(</span><span class="fl">6</span>, <span class="va">Time</span>, <span class="va">Subject</span>, <span class="va">BlockNo</span>, <span class="va">TrialNo</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="co"># Set a time for each bin</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Subject</span>, <span class="va">BlockNo</span>, <span class="va">TrialNo</span>, <span class="va">.bin</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>BinTime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">Time</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/aggregating-looks.html">aggregate_looks</a></span><span class="op">(</span><span class="va">all_defs</span>, <span class="va">Subject</span> <span class="op">+</span> <span class="va">BinTime</span> <span class="op">~</span> <span class="va">GazeByImageAOI</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>Time <span class="op">=</span> <span class="va">BinTime</span><span class="op">)</span></span></code></pre></div>
<p>We now have four growth curves, one for each image type, in a single
dataframe.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">growth_curves</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 120 × 15</span></span></span>
<span><span class="co">#&gt;    .response_def Subject  Time PhonologicalFoil SemanticFoil Target Unrelated</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Target        001P    -<span style="color: #BB0000; text-decoration: underline;">1</span><span style="color: #BB0000;">000</span>               54           15     52        24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Target        001P     -<span style="color: #BB0000;">900</span>               48           38     47        33</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Target        001P     -<span style="color: #BB0000;">800</span>               46           45     44        37</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Target        001P     -<span style="color: #BB0000;">700</span>               36           34     53        41</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Target        001P     -<span style="color: #BB0000;">600</span>               38           36     58        43</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Target        001P     -<span style="color: #BB0000;">500</span>               53           30     54        35</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Target        001P     -<span style="color: #BB0000;">400</span>               57           28     38        37</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Target        001P     -<span style="color: #BB0000;">300</span>               67           35     22        32</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Target        001P     -<span style="color: #BB0000;">200</span>               56           55      7        31</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Target        001P     -<span style="color: #BB0000;">100</span>               52           58      9        34</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 110 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8 more variables: Elsewhere &lt;dbl&gt;, Missing &lt;dbl&gt;, Others &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Primary &lt;dbl&gt;, Looks &lt;dbl&gt;, Prop &lt;dbl&gt;, PropSE &lt;dbl&gt;, PropNA &lt;dbl&gt;</span></span></span></code></pre></div>
<p>We can plot these growth curves.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">growth_curves</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Time</span>, y <span class="op">=</span> <span class="va">Prop</span>, color <span class="op">=</span> <span class="va">.response_def</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">2</span>, color <span class="op">=</span> <span class="st">"white"</span>, yintercept <span class="op">=</span> <span class="fl">.25</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">2</span>, color <span class="op">=</span> <span class="st">"white"</span>, xintercept <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">geom_pointrange</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">Prop</span> <span class="op">-</span> <span class="va">PropSE</span>, ymax <span class="op">=</span> <span class="va">Prop</span> <span class="op">+</span> <span class="va">PropSE</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Time relative to target onset [ms]"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Proportion of looks"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"Image"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Please use `linewidth` instead.</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">This warning is displayed once every 8 hours.</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">generated.</span></span></span></code></pre></div>
<p><img src="aggregating_files/figure-html/unnamed-chunk-10-1.png" alt="Growth curve showing the mean and standard error of proportion of looks to each image at each time point for an individual participant." width="700"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tristan Mahr.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
