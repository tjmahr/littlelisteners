<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Aggregate looks — aggregate_looks â€¢ littlelisteners</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">littlelisteners</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/aggregating.html">Aggregating Eyetracking Data</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Aggregate looks</h1>
    </div>

    
    <p>Aggregate the number of looks to each response type over some grouping
variables like Subject, Time, Condition.</p>
    

    <pre class="usage"><span class='fu'>aggregate_looks</span>(<span class='no'>data</span>, <span class='no'>resp_def</span>, <span class='no'>formula</span>)

<span class='fu'>aggregate_looks2</span>(<span class='no'>data</span>, <span class='no'>resp_def</span>, <span class='no'>resp_var</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>a long data frame of looking data</p></td>
    </tr>
    <tr>
      <th>resp_def</th>
      <td><p>a response definition or a list of response definition.</p></td>
    </tr>
    <tr>
      <th>formula</th>
      <td><p>an aggregation formula. The lefthand terms will be grouping
variables, and the righthand term is the column with eyetracking responses.</p></td>
    </tr>
    <tr>
      <th>resp_var</th>
      <td><p>Name of the column that contains eyetracking responses</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Grouping columns.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a dataframe of the grouping columns along with the number of looks to
each response type, the proportion (and standard error) of looks to the
primary response, and the proportion (and standared error) of missing data.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function is the main tool for preparing eyetracking data for a growth
curve analysis. For example, an aggregation formula like <code>Subject + Time ~ Gaze</code> would provide the number of looks to each image over time for each
subject.
    <code>aggregate_looks()</code> uses an aggregation formula like
<code><a href='http://www.rdocumentation.org/packages/stats/topics/aggregate'>stats::aggregate()</a></code>, whereas <code>aggregate_looks2()</code> uses column names.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>target_def</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='response-definition.html'>create_response_def</a></span>(
  <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>"looks to target"</span>,
  <span class='kw'>primary</span> <span class='kw'>=</span> <span class='st'>"Target"</span>,
  <span class='kw'>others</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"PhonologicalFoil"</span>, <span class='st'>"SemanticFoil"</span>, <span class='st'>"Unrelated"</span>),
  <span class='kw'>elsewhere</span> <span class='kw'>=</span> <span class='st'>"tracked"</span>,
  <span class='kw'>missing</span> <span class='kw'>=</span> <span class='fl'>NA</span>)

<span class='no'>four_image_data</span> <span class='kw'>%&gt;%</span>
  <span class='fu'>aggregate_looks</span>(<span class='no'>target_def</span>, <span class='no'>Subject</span> + <span class='no'>TrialNo</span> ~ <span class='no'>GazeByImageAOI</span>)</div><div class='output co'>#&gt; # A tibble: 24 x 15
#&gt;      .response_def Subject TrialNo PhonologicalFoil SemanticFoil Target
#&gt;              &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;            &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;
#&gt;  1 looks to target    001P       1              232           80    250
#&gt;  2 looks to target    001P       2              181           93    242
#&gt;  3 looks to target    001P       3               79          101    231
#&gt;  4 looks to target    001P       4              188          135    123
#&gt;  5 looks to target    001P       5               90          170    164
#&gt;  6 looks to target    001P       6               70          198    172
#&gt;  7 looks to target    001P       7               83           47    109
#&gt;  8 looks to target    001P       8               60           63     77
#&gt;  9 looks to target    001P       9               71           50     50
#&gt; 10 looks to target    001P      10               57          305    150
#&gt; # ... with 14 more rows, and 9 more variables: Unrelated &lt;dbl&gt;,
#&gt; #   Elsewhere &lt;dbl&gt;, Missing &lt;dbl&gt;, Others &lt;dbl&gt;, Primary &lt;dbl&gt;, Looks &lt;dbl&gt;,
#&gt; #   Prop &lt;dbl&gt;, PropSE &lt;dbl&gt;, PropNA &lt;dbl&gt;</div><div class='input'>
<span class='no'>four_image_data</span> <span class='kw'>%&gt;%</span>
  <span class='fu'>aggregate_looks</span>(<span class='no'>target_def</span>, <span class='no'>Subject</span> ~ <span class='no'>GazeByImageAOI</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>str</span>()</div><div class='output co'>#&gt; Classes 'tbl_df', 'tbl' and 'data.frame':	1 obs. of  14 variables:
#&gt;  $ .response_def   : chr "looks to target"
#&gt;  $ Subject         : chr "001P"
#&gt;  $ PhonologicalFoil: num 2461
#&gt;  $ SemanticFoil    : num 2478
#&gt;  $ Target          : num 4094
#&gt;  $ Unrelated       : num 2033
#&gt;  $ Elsewhere       : num 1202
#&gt;  $ Missing         : num 8642
#&gt;  $ Others          : num 6972
#&gt;  $ Primary         : num 4094
#&gt;  $ Looks           : num 20910
#&gt;  $ Prop            : num 0.37
#&gt;  $ PropSE          : num 0.00459
#&gt;  $ PropNA          : num 0.413</div><div class='input'>
<span class='co'># With column names</span>
<span class='no'>four_image_data</span> <span class='kw'>%&gt;%</span>
  <span class='fu'>aggregate_looks2</span>(<span class='no'>target_def</span>, <span class='no'>GazeByImageAOI</span>, <span class='no'>Subject</span>, <span class='no'>TrialNo</span>)</div><div class='output co'>#&gt; # A tibble: 24 x 15
#&gt;      .response_def Subject TrialNo PhonologicalFoil SemanticFoil Target
#&gt;              &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;            &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;
#&gt;  1 looks to target    001P       1              232           80    250
#&gt;  2 looks to target    001P       2              181           93    242
#&gt;  3 looks to target    001P       3               79          101    231
#&gt;  4 looks to target    001P       4              188          135    123
#&gt;  5 looks to target    001P       5               90          170    164
#&gt;  6 looks to target    001P       6               70          198    172
#&gt;  7 looks to target    001P       7               83           47    109
#&gt;  8 looks to target    001P       8               60           63     77
#&gt;  9 looks to target    001P       9               71           50     50
#&gt; 10 looks to target    001P      10               57          305    150
#&gt; # ... with 14 more rows, and 9 more variables: Unrelated &lt;dbl&gt;,
#&gt; #   Elsewhere &lt;dbl&gt;, Missing &lt;dbl&gt;, Others &lt;dbl&gt;, Primary &lt;dbl&gt;, Looks &lt;dbl&gt;,
#&gt; #   Prop &lt;dbl&gt;, PropSE &lt;dbl&gt;, PropNA &lt;dbl&gt;</div><div class='input'>
<span class='no'>four_image_data</span> <span class='kw'>%&gt;%</span>
  <span class='fu'>aggregate_looks2</span>(<span class='no'>target_def</span>, <span class='no'>GazeByImageAOI</span>, <span class='no'>Subject</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>str</span>()</div><div class='output co'>#&gt; Classes 'tbl_df', 'tbl' and 'data.frame':	1 obs. of  14 variables:
#&gt;  $ .response_def   : chr "looks to target"
#&gt;  $ Subject         : chr "001P"
#&gt;  $ PhonologicalFoil: num 2461
#&gt;  $ SemanticFoil    : num 2478
#&gt;  $ Target          : num 4094
#&gt;  $ Unrelated       : num 2033
#&gt;  $ Elsewhere       : num 1202
#&gt;  $ Missing         : num 8642
#&gt;  $ Others          : num 6972
#&gt;  $ Primary         : num 4094
#&gt;  $ Looks           : num 20910
#&gt;  $ Prop            : num 0.37
#&gt;  $ PropSE          : num 0.00459
#&gt;  $ PropNA          : num 0.413</div><div class='input'>
<span class='no'>phonological_def</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='response-definition.html'>create_response_def</a></span>(
  <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>"looks to phonological foil"</span>,
  <span class='kw'>primary</span> <span class='kw'>=</span> <span class='st'>"PhonologicalFoil"</span>,
  <span class='kw'>others</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"Target"</span>, <span class='st'>"SemanticFoil"</span>, <span class='st'>"Unrelated"</span>),
  <span class='kw'>elsewhere</span> <span class='kw'>=</span> <span class='st'>"tracked"</span>,
  <span class='kw'>missing</span> <span class='kw'>=</span> <span class='fl'>NA</span>)

<span class='co'># Aggregate looks to multiple response definitions at once</span>
<span class='no'>defs</span> <span class='kw'>&lt;-</span> <span class='fu'>list</span>(<span class='no'>target_def</span>, <span class='no'>phonological_def</span>)
<span class='no'>four_image_data</span> <span class='kw'>%&gt;%</span>
  <span class='fu'>aggregate_looks</span>(<span class='no'>defs</span>, <span class='no'>Subject</span> + <span class='no'>BlockNo</span> ~ <span class='no'>GazeByImageAOI</span>) <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='http://dplyr.tidyverse.org/reference/select.html'>select</a></span>(<span class='no'>.response_def</span>, <span class='no'>Subject</span>, <span class='no'>BlockNo</span>, <span class='no'>Primary</span>:<span class='no'>PropNA</span>) <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='http://dplyr.tidyverse.org/reference/summarise_all.html'>mutate_at</a></span>(<span class='fu'>c</span>(<span class='st'>"Prop"</span>, <span class='st'>"PropSE"</span>, <span class='st'>"PropNA"</span>), <span class='no'>round</span>, <span class='fl'>3</span>)</div><div class='output co'>#&gt; # A tibble: 4 x 8
#&gt;                .response_def Subject BlockNo Primary Looks  Prop PropSE PropNA
#&gt;                        &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
#&gt; 1            looks to target    001P       1    1439 11224 0.357  0.008  0.591
#&gt; 2            looks to target    001P       2    2655  9686 0.377  0.006  0.207
#&gt; 3 looks to phonological foil    001P       1     937 11224 0.233  0.007  0.591
#&gt; 4 looks to phonological foil    001P       2    1524  9686 0.217  0.005  0.207</div><div class='input'>
<span class='co'># Compute a growth curve</span>
<span class='no'>growth_curve</span> <span class='kw'>&lt;-</span> <span class='no'>four_image_data</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='adjust_times.html'>adjust_times</a></span>(<span class='no'>Time</span>, <span class='no'>TargetOnset</span>, <span class='no'>Subject</span>, <span class='no'>BlockNo</span>, <span class='no'>TrialNo</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>aggregate_looks</span>(<span class='no'>target_def</span>, <span class='no'>Time</span> ~ <span class='no'>GazeByImageAOI</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>filter</span>(-<span class='fl'>1000</span> <span class='kw'>&lt;=</span> <span class='no'>Time</span>, <span class='no'>Time</span> <span class='kw'>&lt;=</span> <span class='fl'>2000</span>)

<span class='fu'>library</span>(<span class='no'>ggplot2</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: package 'ggplot2' was built under R version 3.4.1</span></div><div class='input'><span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='no'>growth_curve</span>) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>Time</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>Prop</span>) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_abline'>geom_hline</a></span>(<span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>color</span> <span class='kw'>=</span> <span class='st'>"white"</span>, <span class='kw'>yintercept</span> <span class='kw'>=</span> <span class='fl'>.25</span>) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_abline'>geom_vline</a></span>(<span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>color</span> <span class='kw'>=</span> <span class='st'>"white"</span>, <span class='kw'>xintercept</span> <span class='kw'>=</span> <span class='fl'>0</span>) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_linerange'>geom_pointrange</a></span>(<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>ymin</span> <span class='kw'>=</span> <span class='no'>Prop</span> - <span class='no'>PropSE</span>, <span class='kw'>ymax</span> <span class='kw'>=</span> <span class='no'>Prop</span> + <span class='no'>PropSE</span>)) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/labs'>labs</a></span>(<span class='kw'>y</span> <span class='kw'>=</span> <span class='st'>"Proportion of looks to target"</span>,
       <span class='kw'>x</span> <span class='kw'>=</span> <span class='st'>"Time relative to target onset [ms]"</span>) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggtheme'>theme_grey</a></span>(<span class='kw'>base_size</span> <span class='kw'>=</span> <span class='fl'>14</span>)</div><div class='img'><img src='aggregating-looks-1.png' alt='' width='700' height='432.632880098887' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Tristan Mahr.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
